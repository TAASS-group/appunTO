"use client";

import React, { useState } from "react";
import { MdPreview, MdCatalog, MdEditor } from "md-editor-rt";
import "md-editor-rt/lib/preview.css";
import "md-editor-rt/lib/style.css";
import { Button } from "../ui/button";

const scrollElement = document.documentElement;

export default function PreviewFile() {
  const textprova = `## 😲 md-editor-rt

Markdown Editor for React, developed in jsx and typescript, support different themes、beautify content by prettier.

### 🤖 Base

**bold**, <u>underline</u>, _italic_, ~~line-through~~, superscript<supsubscript>26</supsubscript subscript<sub>[1]</sub>inline code，[link](https://github.com/imzbf)

> quote: I Have a Dream

1. So even though we face the difficulties of today and tomorrow, I still have a dream.
2. It is a dream deeply rooted in the American dream.
3. I have a dream that one day this nation will rise up.

- [ ] Friday
- [ ] Saturday
- [x] Sunday

![Picture](https://imzbf.github.io/md-editor-rt/imgs/mark_emoji.gif)

## 🤗 Demo



## 🖨 Text

The Old Man and the Sea served to reinvigorate Hemingway's literary reputation and prompted a reexamination of his entire body of work.

## 📈 Table

| nickname | from             |
| -------- | ---------------- |
| zhijian  | ChongQing, China |

## 📏 Formula

Inline: $x+y^{2x}$

$$
\sqrt[3]{x}
$$

## 🧬 Diagram


## 🪄 Alert

!!! note Supported Types

note、abstract、info、tip、success、question、warning、failure、danger、bug、example、quote、hint、caution、error、attention

!!!

## ☘️ em...
`;

  const [id] = useState("preview-only");
  const [preview, setPreview] = useState(false);
  const [catalog, setCatalog] = useState(false);
  const [text, setText] = useState(textprova);

  return (
    <div className="flex flex-col w-full px-4 pt-8">
      <div className="flex flex-col">
        <div className="text-center">
          <span className="text-xl">
            <span className="font-semibold">Titolo appunto</span>{" "}
            <span className="text-sm">written by</span>{" "}
            <span className="font-semibold">Me</span>
          </span>
        </div>
        <div className="w-full flex justify-between py-4">
          <div className="flex gap-4">
            <Button>asd</Button>
            <Button>asd</Button>
            <Button>asd</Button>
          </div>
          <div>
            <Button onClick={() => setCatalog((prev) => !prev)}>
              Show catalog
            </Button>
          </div>
        </div>
      </div>
      <div className="flex">
        {preview ? (
          <div className="relative">
            <MdPreview editorId={id} modelValue={text} className=" !bg-muted" />

            <div
              className={`absolute top-0 right-0 bg-gray-200 ${
                catalog ? "hidden" : "block"
              }`}
            >
              <MdCatalog editorId={id} scrollElement={scrollElement} />
            </div>
          </div>
        ) : (
          <MdEditor editorId={id} modelValue={text} onChange={setText} />
        )}
      </div>
    </div>
  );
}
